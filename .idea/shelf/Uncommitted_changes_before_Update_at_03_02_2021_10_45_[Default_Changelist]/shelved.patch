Index: app/src/main/java/com/example/retocomerciales/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.retocomerciales;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.example.retocomerciales.Clases.Datos;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\n\r\nimport java.io.DataOutputStream;\r\nimport java.io.IOException;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback {\r\n\r\n    Button _iniciar,llamar,correo;\r\n    Intent intent;\r\n    private GoogleMap mMap;\r\n    Spinner spComercial;\r\n    String telf, emailDelegacion;\r\n    TextView nomDelegacion;\r\n\r\n    //permisos de almacenamiento\r\n    private static final int REQUEST_EXTERNAL_STORAGE = 1;\r\n    private static String[] PERMISSIONS_STORAGE = {\r\n            Manifest.permission.READ_EXTERNAL_STORAGE,\r\n            Manifest.permission.WRITE_EXTERNAL_STORAGE\r\n    };\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        //comprobar permisos\r\n        try {\r\n            checkExternalStoragePermission();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        _iniciar=findViewById(R.id.btn_iniciar);\r\n        llamar = findViewById(R.id.btnLlamar);\r\n        correo = findViewById(R.id.btnCorreo);\r\n        spComercial = findViewById(R.id.spn_eligeComercial);\r\n        nomDelegacion = findViewById(R.id.lbl_nomDelegacion);\r\n\r\n        //cargar los datos necesarios para la clase Datos\r\n        Datos datos = Datos.getInstance();\r\n        datos.setMainActivityElements(getResources(), getBaseContext());\r\n\r\n        if (datos.isDbExist()){\r\n            datos.cargarAssets();\r\n            datos.insertAll(datos.getDb());\r\n        }else{\r\n            datos.cargarProductosDesdeBD(getBaseContext());\r\n        }\r\n\r\n        final Datos datos2 = datos;\r\n        //Spinner Comerciales\r\n        final ArrayAdapter adapterComerciales = new ArrayAdapter<>(this, android.R.layout.simple_spinner_item, datos.getNombresComerciales());\r\n        adapterComerciales.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spComercial.setAdapter(adapterComerciales);\r\n\r\n        spComercial.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @SuppressLint(\"SetTextI18n\")\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {\r\n                datos2.setPosComercial(position);\r\n\r\n                nomDelegacion.setText(\"Delegación provincial \" + datos2.getComercial(position).getDelegacion());\r\n                emailDelegacion = datos2.getComercial(position).getEmailDelegacion();\r\n                telf = datos2.getComercial(position).getTelefonoDelegacion();\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> parent) {\r\n            }\r\n        });\r\n\r\n        //llamada\r\n        llamar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(Intent.ACTION_DIAL);\r\n                intent.setData(Uri.parse(\"tel:\" + telf));\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //correo a delegación\r\n        correo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                crearCorreo();\r\n            }\r\n        });\r\n\r\n        //botón iniciar\r\n        _iniciar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                intent = new Intent(MainActivity.this, activity_menu.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //fragmento mapa\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.map);\r\n        mapFragment.getMapAsync(this);\r\n    }\r\n\r\n    //obicaciones marcadas en le mapa\r\n    public void onMapReady(GoogleMap googleMap) {\r\n        mMap = googleMap;\r\n\r\n        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(43.30472446500069, -2.0168812128018994), 15.0f));\r\n        // Add a marker in Sydney and move the camera\r\n        LatLng cebanc = new LatLng(43.30472446500069, -2.0168812128018994);\r\n        mMap.addMarker(new MarkerOptions().position(cebanc).title(\"Cebanc\"));\r\n        mMap.moveCamera(CameraUpdateFactory.newLatLng(cebanc));\r\n\r\n        LatLng ibermatica = new LatLng(43.287434143240006, -1.9855139867497127);\r\n        mMap.addMarker(new MarkerOptions().position(ibermatica).title(\"Ibermatica\"));\r\n        mMap.moveCamera(CameraUpdateFactory.newLatLng(ibermatica));\r\n\r\n        LatLng dosSystem = new LatLng(43.323055210313285, -1.9822306305925652);\r\n        mMap.addMarker(new MarkerOptions().position(dosSystem).title(\"DosSystem\"));\r\n        mMap.moveCamera(CameraUpdateFactory.newLatLng(dosSystem));\r\n    }\r\n\r\n    public void crearCorreo() {\r\n        Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(\"mailto\", emailDelegacion, null));\r\n        if (intent.resolveActivity(getPackageManager()) != null) {\r\n            startActivity(intent);\r\n        }\r\n    }\r\n ///////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    private void checkExternalStoragePermission() throws IOException {\r\n        int permissionCheck = ContextCompat.checkSelfPermission(\r\n                this, Manifest.permission.READ_EXTERNAL_STORAGE);\r\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\r\n            Toast.makeText(getApplicationContext(), \"Acepta los permisos\", Toast.LENGTH_SHORT).show();\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, 225);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/retocomerciales/MainActivity.java	(revision d32a24cfa2a74644e519e5ce597dd5f2f8874493)
+++ app/src/main/java/com/example/retocomerciales/MainActivity.java	(date 1611909723559)
@@ -67,7 +67,7 @@
 
         //cargar los datos necesarios para la clase Datos
         Datos datos = Datos.getInstance();
-        datos.setMainActivityElements(getResources(), getBaseContext());
+
 
         if (datos.isDbExist()){
             datos.cargarAssets();
